---
const cloudTypes = ['cloud1', 'cloud2', 'cloud3', 'cloud4'];
const cloudLayers = ['front', 'back'];

const randType = cloudTypes[Math.floor(Math.random() * cloudTypes.length)];
const randLayer = cloudLayers[Math.floor(Math.random() * cloudLayers.length)];

const randomizeHorizontal = () => Math.random() * 30 - 10; // between -10 and 20vw
const randomizeHeight = () => Math.random() * 80 - 15; // between -20 and 30vh
const randomizeSpeed = (min: number, max: number) =>
  Math.random() * (max - min) + min; // in seconds
// Randomize speed based on layer (front or back)
const animationDuration =
  randLayer === 'front' ? randomizeSpeed(20, 40) : randomizeSpeed(50, 80);
---

<img
  class={randLayer}
  src={`img/clouds/${randType}.png`}
  alt=""
  style={`
    left: ${randomizeHorizontal()}vw; 
    top: ${randomizeHeight()}vh;
    animation-duration: ${animationDuration}s;
  `}
/>

<style lang="scss">
  @import '../global.scss';

  .front {
    width: 20em;
    opacity: 0.9;
    z-index: 1;
    position: absolute;
    animation: front linear infinite;
  }

  .back {
    width: 40em;
    opacity: 0.75;
    z-index: -1;
    position: absolute;
    animation: back linear infinite;
  }

  @keyframes front {
    0% {
      transform: translateX(-100vw);
    }
    100% {
      transform: translateX(100vw);
      opacity: 0;
    }
  }

  @keyframes back {
    0% {
      transform: translateX(-100vw);
    }
    100% {
      transform: translateX(100vw);
      opacity: 0;
    }
  }
</style>
