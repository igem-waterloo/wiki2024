---
const cloudTypes = ['cloud1', 'cloud2', 'cloud3', 'cloud4', 'cloud5'];
const cloudLayers = ['front', 'back'];

const randType = cloudTypes[Math.floor(Math.random() * cloudTypes.length)];
const randLayer = cloudLayers[Math.floor(Math.random() * cloudLayers.length)];

const randomizeSize = () => Math.random() * 25 + 10; // 10 to 40em
const randomizeX = () => Math.random() * 30 - 20; // -10 to 20vw
const randomizeY = () => Math.random() * 70 + 10; // 10 to 80vh
const randomizeSpeed = (min: number, max: number) =>
  Math.random() * (max - min) + min; // in seconds
const animationDuration =
  // Randomize speed based on layer (front or back)
  randLayer === 'front' ? randomizeSpeed(20, 40) : randomizeSpeed(50, 80);
---

<img
  class={randLayer}
  src={`img/environment/clouds/${randType}.png`}
  alt=""
  style={`
    width: ${randomizeSize()}em;
    left: ${randomizeX()}vw;
    top: ${randomizeY()}vh;
    animation-duration: ${animationDuration}s;
  `}
/>

<style lang="scss">
  @import '../global.scss';

  .front {
    opacity: 0.8;
    position: absolute;
    left: -10vw;
    // filter: sepia(80%);
    animation: move-cloud-across-screen linear infinite;
  }

  .back {
    opacity: 0.6;
    position: absolute;
    left: -10vw;
    // filter: sepia(80%); // "methane clouds"
    animation: move-cloud-across-screen linear infinite;
  }

  @keyframes move-cloud-across-screen {
    0% {
      transform: translateX(-100vw);
    }
    100% {
      transform: translateX(100vw);
      opacity: 0;
    }
  }
</style>
